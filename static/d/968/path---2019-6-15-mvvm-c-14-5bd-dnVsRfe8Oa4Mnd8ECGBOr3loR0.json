{"data":{"site":{"siteMetadata":{"title":"Bee starter","author":"[Your Name]","siteUrl":"https://gatsby-starter-bee.netlify.com","comment":{"disqusShortName":"","utterances":"JaeYeopHan/gatsby-starter-bee"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"67e14683-7363-53fa-af2e-3abefed4860c","excerpt":"…","html":"<p>在前端的学习中，经常会听到双向绑定（<code class=\"language-text\">MVVM</code>）这个概念，双向绑定的概念很简单，就是视图（<code class=\"language-text\">View</code>）上的更新能够实时更新数据层（<code class=\"language-text\">Model</code>），同时数据层的更新也会实时更新到视图层。不同于<code class=\"language-text\">MVC</code>的数据单向流动（从数据层到视图层），那么如何实现数据和视图的双向绑定呢？\n实现数据的双向绑定，首先我们要搞明白面临的问题：</p>\n<ul>\n<li>如何监听试图层的变化？</li>\n<li>视图层变化之后如何更新到数据层？</li>\n<li>如何监听数据层的变化？</li>\n<li>如何将数据层的变化更新到视图层？</li>\n</ul>\n<p>视图层的更新主要是来自用户的输入行为（输入、点击等），我们可以通过监听事件的方式（<code class=\"language-text\">keyup</code>、<code class=\"language-text\">keydown</code>等），在事件回调中获取视图层的更新，将更新同步到数据层上，由于数据层的更新，我们再用数据去刷视图层，这样就是实现了双向绑定，从网上获取的资料来看，主要有以下几种实现方式：</p>\n<h1 id=\"手动绑定\"><a href=\"#%E6%89%8B%E5%8A%A8%E7%BB%91%E5%AE%9A\" aria-label=\"手动绑定 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>手动绑定</h1>\n<p>这里手动绑定的意思是，在<code class=\"language-text\">DOM</code>上绑定事件回调，在事件回调函数值中去更新数据层和重新渲染视图，简单的实现如下：\n<span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 110.11608623548923%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAADBUlEQVQ4y5WUy08TURTGu23oA9p533ndeXbaIqDCX4EmPgJxYSKJC5QENBoXJu6REEkAQxCBKgsgaTUuBBEXbIQ/6/PMtCUWAcvimzOv+5vvzDnnpnb3jlA/PEH94BiNg99oHFL8edyMXeoLrf/66wQ734+Q2mzs4+WrN5h6/gwT06TJGUw8mWnGbkTvPpqcxtSL1/jU+IHUwsYORnwPJT+PjFFAtieHbD7fqdzFyuV7ke7pgWaYWK7tIjW/sgkeRtCZB43pkHQDksYgyDJEWYEUS1EvlKxqKIoSuBdgfqWG1OzSRziJwyoq0QD8/mFwtwrb8MC4C4X7EGmRIDU/cJ4KggjL8fCWWKn4YHIH3PExNDgMpulQZA2KyiARSKIYL7ocKCTA2aW1JtAiJ4IkoRQMwLVDDJocpsFREMUE1IZdBO0AxinHF31FAaEziNC9hrLlI6C0mW7/1925Dk1yqFJBQvqPrlOCx4Mk9faCqwNtB8wwUC4PUNpVBJV+6EGZKq10pNtVyn875K4Pg/6fqFAxyGHcFuIZaNfAeHEluk5pV+BbcVFcmLoLy/ShELzrKreLUiiKKHlDKFFRbnghLNuDrLB/XHYJdFEUJAROFZE/SOABlHlExYlQpHY6TfkqQNW0oLlB8v8EGiWpXeFLqnspkDsBXL8/mWOJ4IKikGsxgcezmpy3rk/Vct4evQ5g/NA0rGRa/MpNeG4EgxxrPkXLo3kvQwtoE7Fd6NyDSgZUk3qV1vUVigljtj3LzdETYYcVcF6CYwaw3BAsLIN5EUwCGyH1ph+SqOkJLusWZMZI1AFUPJtabnax1Tbc82GGNCHVERiGA9NyoNqxXGi02yj0QY1ZYMyAQs8YuVapCzTbBiNnCp07QakJnFteBzNN9DKSrCKTzSKTo02WYrYds7nkPJNsqrnknfh+pnU/nU5TrzLMvd9AKt5lHz5+ilv3xjF6Zwyjd8cv0FhLZ++N4/b9Bwkj2bFr9X2sbX/D4sY2Fj5s4d3q5ytpYXULi+vbCaNW38MfWP/ZDBxwjmkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"HandSetHtml\"\n        title=\"\"\n        src=\"/static/84e65ec1e909cf16f05d4d970f70098a/e41c6/handSetHTML.png\"\n        srcset=\"/static/84e65ec1e909cf16f05d4d970f70098a/7c8aa/handSetHTML.png 148w,\n/static/84e65ec1e909cf16f05d4d970f70098a/1e920/handSetHTML.png 295w,\n/static/84e65ec1e909cf16f05d4d970f70098a/e41c6/handSetHTML.png 590w,\n/static/84e65ec1e909cf16f05d4d970f70098a/cb39b/handSetHTML.png 603w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n如上，我们在<code class=\"language-text\">HTML</code>中有一个<code class=\"language-text\">input</code>元素用来输入，另一个<code class=\"language-text\">div</code>元素用来显示输入的元素；在这两个元素上我们声明了特定的属性<code class=\"language-text\">q-value</code>和<code class=\"language-text\">q-text</code>，这两个属性名标示着和数据层的绑定关系，如下，是相关的JS代码：\n<span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 588px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 153.40136054421768%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAAAsSAAALEgHS3X78AAAEkElEQVRIx51W224cRRDdD0C217s7157pue/szF58IwnwwDdwkUARgRfEQ0AgAUkgQXEQAmQbIqEYgwE7lrlEUUyAB4IMLyAl/NbhdM86sXfXoPBQqp2e6eqqU3VOb+3mnT+x9/s93Nq/h739u/x9t/IPYT9y/+0//sbNO3+htvvTPt57fwVvvnsJr124hFffunisnZ1gB+/eeGcZX/3wM2rru3t4vBygn89iNm5i6pFpTNfrx9jsmM0oP1NHvdHEldVrqF3d/BbdwQBx5ELEOUTShvA8mLY7NAeGMstGy7S0HzW1rr67+MEaamsb19EuSsQyR5EtIksG6CRzKNIFlOkikrQHtxjAywpYjoumYeoAh02vMfD55Y9RW1nfQtkfIJQSMi7gByk8EUCIEMIN4QgJ0wtg+aHO4tiA9Ocuf4Ta6vo2il4PWRxBpiXsIGAZJhqGoa2prDW04cbRoEcDfr6NvOyjwQ0tw8Jsy9RWBWlVfmTzvwZcYYZlv0f8IoR5F/nSAjFN4IUxrDCBI0MYB5sOBToc+EjANWaY5gUcAp4mEkmUIo1yYhnDYcc9HmLztx1lsOhN24bvxQh8PtviSOD7JWedkh+F8Ah8FHmIYwHh+zCZpeP5HBsXLdUQq8rGMG2YlsMg9uQME2Zo8mW3TPHYiRx9jlG3vcTSe5A8TBRz8MMMcdi+3+ljS14dlqwWHeHwZA6z5elybEvAcCpTGbmunDg6IwG30OmqLpu608pmlTUr39Tdr7Kpxmh8dMbmsOQcBtKGLWO4MkAYuIgTn41hpq44EmiSjZWsqRdGyLISUdJDQppFRYEwidmoQMOgONvgXOoqhgeMYlk1ZWMbcdaB7Vg4tRSjPT+vedttL1KBTqHXfhTznSdQ8jmKClaSsgIKiBvoaoT0NK464PKhLrdMk2WGCFimwzEJRAKfXHa5UXFacdv0pBaIqkxrqD4PSj8yNoZpsOSEMsbTkwxmEMFQ5fJ01XHHkfBFBNv2eIDURGgeh6Eam+l6A2Uh0SmZzeAkwhNPws3aZE1RSVm2oCEoKXFprCB6MI8K0zHq1RsNlhUhkgXlS5IpDkIvI8XaOjvPi3TZCgKFo/LST/V7KRMNxbnLHx5kWHKBg8xFy3T0ECvOWuyuzXIrqg0VnF5BoL5RvrJqCoZqs4XeYA5hyBfETCmMSU5bgs9sguF6WlwtYetDRsdlrGQtsN0uSw0Qt+cg2+QuFSdQvKVAtBjQFBQK2xrO4n/o4aq6AnoLCH0lWzFnLGfwTOMXUqKEH8Hh5aWCOj676zkVnyco+KEul+xkikFvDll5EhE1MM4GyOMBhXeBzOnDJAUtbcRVMGvibRL3iQEzUs9zEyQxyxUVbqbCkwEEdVIFsNSaUh7b0c3RV6vtTg5Y9ufhKPAVCw7uW1N5UopMqO7l4+7nak3BcF5R75Mvd0i5HK2mrYk/xX8B0yM2NWJj76dntL9whffyBv+KvPL623jm9It4+vkzeOq5Fx7OuOfZ0y/hzMtn8ekXO6jt7P2Gr2/8gmvbN3B1c/d/2WfffI/N727j+q1f8Q8OC+GEcy7ISwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"handset\"\n        title=\"\"\n        src=\"/static/bfc4c520ad6b2c659b9e799fe2753790/9ce4d/handSetJs.png\"\n        srcset=\"/static/bfc4c520ad6b2c659b9e799fe2753790/72830/handSetJs.png 148w,\n/static/bfc4c520ad6b2c659b9e799fe2753790/eb28d/handSetJs.png 295w,\n/static/bfc4c520ad6b2c659b9e799fe2753790/9ce4d/handSetJs.png 588w\"\n        sizes=\"(max-width: 588px) 100vw, 588px\"\n      />\n  </span>\n这里我们实现双向绑定的思路是，视图层对数据的绑定是通过特定的属性<code class=\"language-text\">q-*</code>，来将<code class=\"language-text\">UI</code>和<code class=\"language-text\">Model</code>绑定起来，使用事件回调监测数据的变化，更新数据，然后刷新<code class=\"language-text\">UI</code>。</p>\n<h1 id=\"脏检测\"><a href=\"#%E8%84%8F%E6%A3%80%E6%B5%8B\" aria-label=\"脏检测 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>脏检测</h1>\n<p><code class=\"language-text\">AngularJS</code>的数据双向绑定是基于脏检查的机制，脏检查的大致实现思想是，在数据层上维护变量的当前值，当视图层上的操作引起数据更新时，会执行脏检测，如果有绑定的变量的值发生了变化，变量对应的指令就会刷新数据绑定的<code class=\"language-text\">UI</code>；同样的脏检查机制的实现，我们在<code class=\"language-text\">DOM</code>上的也有绑定两个东西，一个是数据层上的变量的应用，<code class=\"language-text\">UI</code>更新的时候更新对应的变量，然后另外就是绑定的指令，用来执行具体的<code class=\"language-text\">UI</code>层面的更新逻辑。\n<span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 102.15384615384615%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACtElEQVQ4y51UTU8UQRDdiwnLaqLZ+e6emZ6e710WFGP8IXhCjBDlwD/AcDESEFaNsAbCh3DwIMGTifw9+lkzLDhLWHE9vHRPZerNq1dVU/t6eobXi0t4sbiAmbkFPJudHw3P5zEz+xJzr5Zw8P0nat29b2gzGzK5jzv3Ghgfq6PeaJQY75+X95vQuHsXY/U6mrqBjS+HqL3fPoArI0SyDRHGcJMWHO7DdngfLmzGYTEXpsNg2s4gKKabFrwgxOqnHdTWPu8RAUcatZCmHXgyg+tG8NwQnAfwuAT3AlgihEEf0AyzJKiiUMc9gbfdHhFu7ZVfkWGCVmsSrs3ACU1K1G5AQVC9/yH0+4Sk0KKSdMNCO32C1I8wHbbAXXmVXFUzXOE1QsO00YqmIf0EkUdeUrmm5YxOuF6UTOYKGSLPO0iSHEGSwWCFX8ZQkuEK+x4WgSRpwyfzTV/CdAU0enGYb/9EONV5ioSaI2lsPB7Cp9IZ80dU2PdQ003k0WPkIkEnTCnmlx5eJRojlGw5F01JZacc8EhkyGRexm9Td6PCYhMYTToL4lKJQS+Zlg3tFqK/EsYxrZ5MqRk+DM8vO3zZiGZx1ysDrhsDTRrclD5hQRBQh9P0EeJkEjLO4KRteCJGEtBZPMc5TUGMIJ2ge0ZrSk0r/PYF7bIY9NCifQ7zhxDUWUFJLLogcMOMSBJwssQREThNASNCFtI9imDLBDrZU1WoTOYorz2leNhSpmErw2ZKc5jSHa405qqmSTHDVJrtUNylk+KWo3TLUjrz1APdUFSlIkJV6+4cn2edSSWytvJkqFwRKE9IQlABPQfyWlxeocjJJ6bU+tb+ee34xxmKf+LK6ge8ebdJ6GKZzuXyvMRmBddjXaysfSw5Cq7a0emv7d7xyS4p3d/oHf4Xitze0cluwfUbUSl4MMrpwN0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"dirtyCheckHtml\"\n        title=\"\"\n        src=\"/static/b62136dacee091cedda6472b57d18c59/e41c6/dirtyCheckHTML.png\"\n        srcset=\"/static/b62136dacee091cedda6472b57d18c59/7c8aa/dirtyCheckHTML.png 148w,\n/static/b62136dacee091cedda6472b57d18c59/1e920/dirtyCheckHTML.png 295w,\n/static/b62136dacee091cedda6472b57d18c59/e41c6/dirtyCheckHTML.png 590w,\n/static/b62136dacee091cedda6472b57d18c59/93b43/dirtyCheckHTML.png 650w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n<span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 588px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 228.57142857142856%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"dirtyCheckJs\"\n        title=\"\"\n        src=\"/static/7ad9370138dc63b7095da4782d30f90c/9ce4d/dirtyCheckJs.png\"\n        srcset=\"/static/7ad9370138dc63b7095da4782d30f90c/72830/dirtyCheckJs.png 148w,\n/static/7ad9370138dc63b7095da4782d30f90c/eb28d/dirtyCheckJs.png 295w,\n/static/7ad9370138dc63b7095da4782d30f90c/9ce4d/dirtyCheckJs.png 588w\"\n        sizes=\"(max-width: 588px) 100vw, 588px\"\n      />\n  </span></p>\n<h1 id=\"数据劫持\"><a href=\"#%E6%95%B0%E6%8D%AE%E5%8A%AB%E6%8C%81\" aria-label=\"数据劫持 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>数据劫持</h1>\n<p>实现双向绑定的另一种方式是，使用数据劫持的方式，给数据层的属性定制<code class=\"language-text\">getter</code>和<code class=\"language-text\">setter</code>，在<code class=\"language-text\">UI</code>上触发了回调函数更新数据的时候，会调到我们定制的<code class=\"language-text\">setter</code>中，在<code class=\"language-text\">setter</code>中会刷新<code class=\"language-text\">UI</code>。\n<span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 108.67430441898527%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAC2UlEQVQ4y51UW0sVURQ+7545ls59z3Xv2WfOzTx28WeED0kZQQlCRRftAvlQVPSSEUiYQWVqhFimSS+K2UMEWf/qa80MR8+J1KMPH2vNmplvf+u2c5/WfmB58zeWN7awsvELK5tkv21ltk18Iax+/4Ol9Z/Iza2s4+69B7h2awzDNwlXRjF8dTSz7eBqhpHrtzH9fgm5ydmP6JcRYtmJvNsFpUOBUuiE0tmEwh5oej/+eAK556/mwOMyHBbBZg50x4VuM6iGAc0woScwrV1hWPa2f+f+E+SeTs2Ak8KSrKFaqUP2nEIoagjcCCwUMEMJzbSh6tkBuyF5Pzb+CLkJIvRCjpBL9NX7wWwHpmHTyQw6na6RbfywH+Ho+MNMoU9KkkCp2AsRxKh7ITw3RJempfEG2V6krYQ8wtFuFTGvIxbHUPElirwG5gRtqWshzFIWsKghMdVR8BIiXoRNqWu6eVhCDuZ6qFR6Ke0aZLUHTrFCnbZa0m0r5WaFXEh4fgg1GQPLSUfh0CknP1fLxyntKqSfNEXAcwR8T8Kk9A/WZWpKl6qhFPWhTE05EcXw/QiGydpW+Q+hQLemoxjWUJbU6Yg6HZYREVRd36njQQgtzwcTcbYVNH9648N9arcrYUijImRPusc6kaumiW4qg0rKE/WZnz2naFL+X8Ik4Ll+ui2yehJSlOEKmkdJlurJqVk2jZJDDXRpTU0SYHnJrBrbh7SunqEjKFURBiVwrwif0mdEwKIyPCJ2Y5pNapYTSdgUM+hwgzGCA8PxqFTWztiE9JEX04bU+uE6nGaRwww4rEDADiPyyTKqMXNh0p7bpNBOtikI6UaiZ1FKSccSwmcv34H5Ho4wAm1GXlGQLxSgKITUKtt+Pr1IGzEl85M4+R15JSOcnl/Cpcs3MDB4HqfPDB0cg0MYOHsB5y6OIMk2N7+8jreLXzE1u4jJNx8OhRczC3i9sIq5z2v4C99J0aNSaXjtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"hijackingHTML\"\n        title=\"\"\n        src=\"/static/3c12a9b983da2392d418567bd376f722/e41c6/hiijackingHTML.png\"\n        srcset=\"/static/3c12a9b983da2392d418567bd376f722/7c8aa/hiijackingHTML.png 148w,\n/static/3c12a9b983da2392d418567bd376f722/1e920/hiijackingHTML.png 295w,\n/static/3c12a9b983da2392d418567bd376f722/e41c6/hiijackingHTML.png 590w,\n/static/3c12a9b983da2392d418567bd376f722/12322/hiijackingHTML.png 611w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n<span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 588px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 185.20408163265304%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAAsSAAALEgHS3X78AAAFY0lEQVRIx51WyW4cVRTtPXFid3fN9WqeqwcPiQMSvxBAIgrTBrECIyGCEApBSGxQJokhhkBmJWQBihN2EYYNC8K/kPxDH8571bbb7jYGFldVbVeduveec899rZ8e/Y6NXx/j/uZjbGz+oe43Nv9D8PkHMn77ExKrdffnTXzy2XmcPnMW7350FmunP8baB7vjne04MxHN77Xx9cNPP8edB7+gtX7nPp6rB+gVbSyEXRw+dASH5+e348j8wk4sTMf8QhuH5ubghzHWb/2I1hdX76I3HCKOXIikhJvkcIUH03JVGJYD3WaYFjTDVNfdYaOj6YizApeu3Ebr0re3kJU1Yr9ElS0jiwcok0VU6QpqRpz14dSLEGnJD9jo6oYCnox2V0OYZDh/+TpaF765id5giCjw4ccVvCCB6/hwnIDhw3I86K4PU/gqo/0BU5z7+loDWPX7SKIIHku2fAIYBjq6rkICdFmSihlgU4AXCVj0BuoFzbAIIsNsAPhgRwGNX5bgE7FvhnW/x/7FiKs+6mMrKKoUIk5hxTmcIBoTYk1k1dxvge7OkKQkeQWLDY9jgdCP2c8MrhcQMIWbVjD9SIEbXgjDtuCLBIGXwiDDMwFTsuyLCD7BstxDmgqSEylAx/MI4kK35Ms7peoTGc/IsITOPvXqBKsrBUUuW7CCrCDrZQ9OOaRwM8Rhvs30ZB+nM+SL8h8my9F0mYmjMjAM3svMpID5Wwp9lnSmWC7JcsNmIxV5vxXqZcm6KndHOgeyHIUObJYlwoiaZB/zkGVyBB0HbU2bADAOLjkrKzIboWTpUcqpIeuhvOdDkig5NbLcJsM9wjb3AMpZjjNOiG3g+NEI+dKQc1tgWKxiUDyLfr6K5ep51PlRfkBWklNa1CfH0QkCuL5QmQbxXpb5pSAMIVwXFglwTAHLdJSbSL0Z0hgsS5UsW9D5p5KlsLu6hqpMkOcFRDWAXfRhRjQKEcATscoqCSgjKWo/YRvcCcAuwniPbObbHeSZr8hw62X4i8fhRDHSqEJOSyuSIapkmddFhKGckkZKyg9nZSi/4rocO79m2YKZWYi8Qo2YZQsIETZ9I0GBn6qrzFqG4EhGabYFeJMs9+h7gl8la8p1ttxFjljjMo0hjLOaGDspdKnXXTrsLw6R0BgcGoCb92BHqWLQopSkIdjcF7YgMfZux57dQ+mHdR+eGyKhLLyQRBAk8BIYsvFkWqMGJbtK1FLkXW3X1Oxi+fz6TSytDEmGD5vZif5RZQZOmqspEZ7F/nGO2VddtkXaGisw+TF9v9Er6xolAZJ8CWm1jLzHZdU7hjDKUeQ58iShpJYRprIdifJGy/W2N+GUDmMKW9McFGSqLnxKg74YFYgDvkiBdzSThDUOJFdDhz2b3DEz/VBOQxzTGBKBKApoDFwDSQ2X5ckp6ej/dkmNhd3uaNQgdzP7WHJpBzEngjs5L1fg0SC6411yoH1tZSgZ9LxYvSzVb5IAk9av9MnTgzE+PSjbmpLNjDVqs8nqobGwG79ryuzsWZsHL/reEsslESQjSvrcHSXHjqyHXF60K5H31cnB8YNG4Ka9vw4vjs82JRnuV0tIKA9BfwzyAdJQ/l2aQaa2nixZit2ShynZEsedleENLC6t0rGla5c8NOUIKBc/SNX6dJKiEfHkiUuCqw/Y26eviDo+d1k69pXboyStRrbhjVjKqN3RGdqowystbTSvNVeeD1UcVjE/vvJvC+3RM3NzI0f4owvrN0at7+89xFtr7+PFU6/jxMlXceLlVxjT1xdO7hev4aVTb+DNt9/Dd3c30Lp9/9FfV+89fPLV9XtPme3/ii+v/fCUiT2RWH8DImWZeZomdZwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"hijackingJs\"\n        title=\"\"\n        src=\"/static/e0a87d1af9cf2795279397f5fdbc0b8d/9ce4d/hijackingJs.png\"\n        srcset=\"/static/e0a87d1af9cf2795279397f5fdbc0b8d/72830/hijackingJs.png 148w,\n/static/e0a87d1af9cf2795279397f5fdbc0b8d/eb28d/hijackingJs.png 295w,\n/static/e0a87d1af9cf2795279397f5fdbc0b8d/9ce4d/hijackingJs.png 588w\"\n        sizes=\"(max-width: 588px) 100vw, 588px\"\n      />\n  </span>\n在<code class=\"language-text\">DOM</code>属性上我们只需要指明引用的变量，具体的<code class=\"language-text\">UI</code>刷新逻辑定义在<code class=\"language-text\">setter</code>中。</p>\n<p>以上是实现一个双向绑定的常见手段，这里只是了解大致的原理，具体到不同的前端框架中实现的双向绑定，比文章中介绍的更复杂和更健壮，这里只是了解其原理，抓住主要实现原理，框架层面的实现也是基于这些原理来做的。\n文中的<a href=\"https://github.com/Soyn/demos/tree/master/mvvm\">Demo Code</a></p>\n<h1 id=\"refrence\"><a href=\"#refrence\" aria-label=\"refrence permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Refrence</h1>\n<ul>\n<li><a href=\"https://jixianqianduan.com/frontend-javascript/2015/11/29/js-data-two-ways-binding.html\">javascript实现数据双向绑定的三种方式</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000004681757\">JavaScript数据双向绑定的简单演示 - 前端知识点小结 - SegmentFault 思否</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/25464162\">数据双向绑定的分析和简单实现 - 知乎</a></li>\n</ul>\n<hr>\n<p><strong><em>兴趣遍地都是，坚持和持之以恒才是稀缺的</em></strong></p>","frontmatter":{"title":"双向绑定","date":"June 15, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2019-6-15-mvvm/","previous":{"fields":{"slug":"/development/quick_start/"},"frontmatter":{"title":"Quick Start","category":"development"}},"next":null}}